# Copia como .env y ajusta
DEBUG=True
SECRET_KEY=change-me-please
ALLOWED_HOSTS=127.0.0.1,localhost

# Doppler Relay
DOPPLER_RELAY_API_KEY=tu_api_key
DOPPLER_RELAY_ACCOUNT_ID=9518
DOPPLER_RELAY_AUTH_SCHEME=Bearer
DOPPLER_RELAY_BASE_URL=https://api.dopplerrelay.com/

# Base de datos default (PostgreSQL local)

USE_SQLITE=1  # 1 = usar SQLite en desarrollo; 0 = PostgreSQL
DB_HOST=127.0.0.1
DB_PORT=5432
DB_NAME=relay_app
DB_USER=relay_user
DB_PASSWORD=change-this

# Base de datos analytics (PostgreSQL gestionado)
# ANALYTICS_DB_HOST=
# ANALYTICS_DB_PORT=5432
# ANALYTICS_DB_NAME=
# ANALYTICS_DB_USER=
# ANALYTICS_DB_PASSWORD=
# ANALYTICS_DB_SSLMODE=require

# --- Doppler reports polling tuning (opcional) ---
# Estos valores controlan cuánto esperamos entre los polls al API de Doppler
# mientras se genera un CSV de reportería. Son seguros para producción
# en una VPS de 2 vCPU / 4GB y campañas de ~20k correos.

DOPPLER_REPORTS_TIMEOUT=30
DOPPLER_REPORTS_POLL_INITIAL_DELAY=5
DOPPLER_REPORTS_POLL_MAX_DELAY=15
DOPPLER_REPORTS_POLL_TOTAL_TIMEOUT=900
# DOPPLER_REPORTS_TIMEOUT:
#   Timeout (segundos) por request HTTP individual a Doppler.
# DOPPLER_REPORTS_POLL_INITIAL_DELAY:
#   Espera inicial (segundos) antes del primer poll después de solicitar el reporte.
# DOPPLER_REPORTS_POLL_MAX_DELAY:
#   Máximo intervalo (segundos) entre polls sucesivos.
#   15s evita esperas de 60s y hace que el reporte pase a READY más rápido.
# DOPPLER_REPORTS_POLL_TOTAL_TIMEOUT:
#   Máximo tiempo total (segundos) esperando que Doppler genere el CSV.
#   900s = 15 minutos para campañas grandes.

# --- Report processing timer control (opcional) ---
# Estas variables NO son obligatorias para que funcione la app.
# Sirven para operar la reportería de forma automática con systemd.timer.

REPORTS_TIMER_ENABLED=True
REPORTS_TIMER_INTERVAL=15
REPORTS_TIMER_LOCK_PATH=/opt/app/django-doppler-relay/tmp/timer.lock

# REPORTS_TIMER_ENABLED:
#   True = se usa el timer systemd en producción.
#   False = modo manual (el operador hace click en "Procesar pendientes ahora" en el admin).
# REPORTS_TIMER_INTERVAL:
#   Intervalo en minutos entre ejecuciones del timer (típico: 15).
#   Si haces campañas más pequeñas podrías usar 10.
# REPORTS_TIMER_LOCK_PATH:
#   Ruta de un lock file opcional para evitar ejecuciones simultáneas
#   si el timer corre justo cuando alguien también presiona "Procesar pendientes ahora".
